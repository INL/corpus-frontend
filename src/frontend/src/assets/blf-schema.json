{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$ref": "#/definitions/BLFSchema",
  "definitions": {
    "BLFSchema": {
      "type": "object",
      "properties": {
        "displayName": {
          "type": "string",
          "description": "Displayname of this format. I.e. without the owner's username etc."
        },
        "description": {
          "type": "string",
          "description": "Description of the format. E.g. which files it's meant for."
        },
        "helpUrl": {
          "type": "string",
          "description": "Url where more information can be found (optional)"
        },
        "baseFormat": {
          "type": "string",
          "description": "DEPRECATED."
        },
        "type": {
          "type": "string",
          "description": "For your own administration, not used by BlackLab"
        },
        "fileType": {
          "type": "string",
          "enum": [
            "xml",
            "tabular",
            "text"
          ],
          "description": "Plain text files don't allow you to use a lot of BlackLab's features and hence don't require a lot of configuration either. If you need specific indexing features for non-tabular, non-XML file formats, please let us know and we will consider adding them."
        },
        "fileTypeOptions": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "tsv",
                "csv"
              ],
              "description": "Tab-separated (tsv) or comma-separated (csv, like Excel sheets)"
            },
            "multipleValuesSeparator": {
              "type": "string",
              "description": "Defaults to '/'"
            },
            "columnNames": {
              "type": "boolean",
              "description": "Does the file have column names in the first line? [default: false]"
            },
            "delimiter": {
              "type": "string",
              "description": "The delimiter character to use between column values [default: comma (\",\") for CSV, tab (\"\\t\") for TSV]"
            },
            "quote": {
              "type": "string",
              "description": "The quote character used around column values (where necessary) [default: disable quoting column values]"
            },
            "inlineTags": {
              "type": "boolean",
              "description": "allows inline tags such as in Sketch WPL format. all inline tags encountered will be indexed"
            },
            "glueTags": {
              "type": "boolean",
              "description": "interprets <g/> to be a glue tag such as in Sketch WPL format"
            },
            "allowSeparatorsAfterInlineTags": {
              "type": "boolean",
              "description": "If the file includes \"inline tags\" like <p></p> and <s></s>, (like for example the Sketch Engine WPL format does) is it allowed to have separated characters after such a tag? [default: false]"
            }
          },
          "required": [
            "type",
            "allowSeparatorsAfterInlineTags"
          ],
          "additionalProperties": false,
          "description": "Only relevant for 'tabular' fileType. Allows you to specificy some extra options."
        },
        "processor": {
          "type": "string",
          "enum": [
            "saxon",
            "vtd"
          ],
          "description": "Which xml processor to use. Defaults to vtd. See https://inl.github.io/BlackLab/guide/how-to-configure-indexing.html#xpath-support-level"
        },
        "namespaces": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Namespace declarations for xpaths. The namespace under the empty string ('') will be the default namespace used."
        },
        "documentPath": {
          "type": "string",
          "description": "Xpath: what elements starts a new document?"
        },
        "annotatedFields": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "displayName": {
                "type": "string",
                "description": "How to display the field in the interface (optional)"
              },
              "description": {
                "type": "string",
                "description": "How to describe the field in the interface (optional)"
              },
              "containerPath": {
                "type": "string",
                "description": "Xpath: What element (relative to documentPath) contains this field's contents? (If omitted, entire document is used.)"
              },
              "wordPath": {
                "type": "string",
                "description": "XPath: What are our word tags (relative to containerPath)"
              },
              "tokenIdPath": {
                "type": "string",
                "description": "Xpath: Store an id with every token (wordpath), so you can index standoff annotations referring to this id later. (relative to wordPath)"
              },
              "punctPath": {
                "type": "string",
                "description": "Xpath: punctuation between words."
              },
              "annotations": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string",
                      "description": "Name of the annotation"
                    },
                    "displayName": {
                      "type": "string",
                      "description": "Name of the annotation in the interface. Defaults to the regular name."
                    },
                    "description": {
                      "type": "string",
                      "description": "Description of the annotation in the interface."
                    },
                    "valuePath": {
                      "type": "string",
                      "description": "Xpath: what element contains the value of this annotation"
                    },
                    "captureValuePaths": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "Xpath: Store some xpath results before evaluating valuePath, the stored results can now be used in valuePath. E.g. valuePath=\"/some/dynamic/path/$1/\", BlackLab will replace $1 with the result of the first captureValuePaths entry."
                    },
                    "sensitivity": {
                      "type": "string",
                      "enum": [
                        "sensitive_insensitive",
                        "sensitive",
                        "insensitive",
                        "s",
                        "i",
                        "si",
                        "all"
                      ],
                      "description": "What alternatives are indexed determines how specifically you can specify the desired sensitivity when searching. Each alternative increases index size. Defaults to 'insensitive'"
                    },
                    "subannotations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                          "forEachPath": {
                            "type": "string"
                          },
                          "namePath": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "forEachPath",
                          "namePath"
                        ]
                      }
                    },
                    "forwardIndex": {
                      "type": "boolean",
                      "description": "Whether to store the contents of this field in the forward index. This reduces the size of the index, but disables some features (grouping, sorting, displaying) for this annotation. Defaults to true."
                    },
                    "multipleValues": {
                      "type": "boolean",
                      "description": "Defaults to false."
                    },
                    "allowDuplicateValues": {
                      "type": "boolean",
                      "description": "Filter out duplicate values at the same token during indexing? Not doing this can result in \"double hits\" where the same token is matched twice in a query. Defaults to false."
                    },
                    "captureXml": {
                      "type": "boolean",
                      "description": "Store the xml instead of the text when 'valuePath' results in an xml element."
                    },
                    "isInternal": {
                      "type": "boolean",
                      "description": "Hides the field in various parts of the corpus-frontend. Not used by blacklab. Defaults to false."
                    },
                    "process": {
                      "type": "array",
                      "items": {
                        "anyOf": [
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "replace"
                              },
                              "find": {
                                "type": "string",
                                "description": "Regex to find. All matches are processed."
                              },
                              "replace": {
                                "type": "string",
                                "description": "String to replace with, capture group references ($1) are supported"
                              },
                              "keep": {
                                "type": "string",
                                "const": "all",
                                "description": "keep both before and after. For this, 'multipleValues' must be true."
                              }
                            },
                            "required": [
                              "action",
                              "find",
                              "replace"
                            ],
                            "additionalProperties": false,
                            "title": "Regex replace part of the value",
                            "description": "Replace a part of the value with another value, optionally also keeping the original."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "default"
                              },
                              "value": {
                                "type": "string",
                                "description": "Default value to use if the value is empty."
                              }
                            },
                            "required": [
                              "action",
                              "value"
                            ],
                            "additionalProperties": false,
                            "title": "Default value",
                            "description": "Set a default value if there is none. The default value can be hardcoded, or retrieved from another metadata field."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "default"
                              },
                              "field": {
                                "type": "string",
                                "description": "Metadata Field to take the default value from. Make sure this field is further up in the configuration file, so it's already been indexed."
                              }
                            },
                            "required": [
                              "action",
                              "field"
                            ],
                            "additionalProperties": false,
                            "title": "Default value from another field",
                            "description": "Set a default value if there is none. The default value can be retrieved from another metadata field."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "append"
                              },
                              "value": {
                                "type": "string",
                                "description": "String to append to the value."
                              },
                              "separator": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "action",
                              "value"
                            ],
                            "additionalProperties": false,
                            "title": "Append value",
                            "description": "Append a string to all values."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "append"
                              },
                              "field": {
                                "type": "string",
                                "description": "Metadata Field to take the value to append from. Make sure this field is further up in the configuration file, so it's already been indexed."
                              },
                              "separator": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "action",
                              "field"
                            ],
                            "additionalProperties": false,
                            "title": "Append value from another field",
                            "description": "Append a value of another metadata field to all values."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "split"
                              },
                              "separator": {
                                "type": "string",
                                "description": "Regex to split on. Defaults to ';'"
                              },
                              "keep": {
                                "anyOf": [
                                  {
                                    "type": "number"
                                  },
                                  {
                                    "type": "string",
                                    "const": "all"
                                  },
                                  {
                                    "type": "string",
                                    "const": "both"
                                  }
                                ],
                                "description": "Which value(s) to keep. A 1-based integer. Defaults to the first value. Special value 'all' will keep all split values. Special value 'both' will keep all split values as well as the input values(s). For 'all' and 'both' to work, the field should have 'multipleValues=true'."
                              }
                            },
                            "required": [
                              "action"
                            ],
                            "additionalProperties": false,
                            "title": "Split values",
                            "description": "Split the values and keep one or more parts."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "strip"
                              },
                              "chars": {
                                "type": "string",
                                "description": "List of characters to strip from beginning and end.."
                              }
                            },
                            "required": [
                              "action",
                              "chars"
                            ],
                            "additionalProperties": false,
                            "title": "strip characters",
                            "description": "Strip specific characters from the start and end of values."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "parsePos"
                              },
                              "field": {
                                "type": "string",
                                "description": "Field to extract. If omitted or '_', extract the main feature. Eg for NOU(a=b,c=d), the NOU portion."
                              }
                            },
                            "required": [
                              "action",
                              "field"
                            ],
                            "additionalProperties": false,
                            "title": "Parse part of speech",
                            "description": "parse common part of speech expressions of the form A(b=c,d=e)\nwhere A is the main part of speech (e.g. 'N' for noun), and b=c is a part of speech feature\nsuch as number=plural, etc.\nIf you don't specify field (or specify an underscore _ for field),\nthe main part of speech is extracted.\nIf you specify a feature name (e.g. \"number\"), that feature is extracted."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "chatFormatAgeToMonths"
                              }
                            },
                            "required": [
                              "action"
                            ],
                            "additionalProperties": false,
                            "title": "Convert CHAT format age to months",
                            "description": "convert age as reported in CHAT format to number of months"
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "concatDate"
                              },
                              "yearField": {
                                "type": "string",
                                "description": "Name of the other field containing the year. Ensure this is defined before this one, or if won't have been indexed yet."
                              },
                              "monthField": {
                                "type": "string",
                                "description": "Name of the other field containing the month. Ensure this is defined before this one, or if won't have been indexed yet."
                              },
                              "dayField": {
                                "type": "string",
                                "description": "Name of the other field containing the day. Ensure this is defined before this one, or if won't have been indexed yet."
                              },
                              "autofill": {
                                "type": "string",
                                "enum": [
                                  "start",
                                  "end"
                                ],
                                "description": "If the month is missing, 'start' fills with 01 (januari), 'end' fills with 12 (december). If the day is missing, 'start' fills with 01, 'end' fills with the last day of the month (28-31 depending, takes into account leap years.)."
                              }
                            },
                            "required": [
                              "action",
                              "yearField",
                              "monthField",
                              "dayField"
                            ],
                            "additionalProperties": false,
                            "title": "Concatenate date fields",
                            "description": "Concatenate multiple other metadata fields for year/month/day into a single value in the format yyyymmdd, so they can be sorted and grouped on, and searched using a range-query."
                          }
                        ]
                      },
                      "description": "Post-process values. Every process entry is evaluated in order with the output of the previous one as input."
                    }
                  },
                  "required": [
                    "name",
                    "valuePath"
                  ],
                  "additionalProperties": false
                },
                "description": "What annotation can each word have? How do we index them? (annotations are also called \"(word) properties\" in BlackLab) (valuePaths relative to wordPath) NOTE: forEachPath is NOT allowed for annotations, because we need to know all annotations before indexing,     and with forEachPath you could run in to an unknown new annotation mid-way through."
              },
              "standoffAnnotations": {
                "type": "array",
                "items": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "path": {
                          "type": "string",
                          "description": "Xpath: where to find the standoff."
                        },
                        "tokenRefPath": {
                          "type": "string",
                          "description": "Xpath: What token position(s) to index these values at. Relative to 'path'. may have multiple matches; values will be indexed at all those tokens"
                        },
                        "annotations": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string",
                                "description": "Name of the annotation"
                              },
                              "displayName": {
                                "type": "string",
                                "description": "Name of the annotation in the interface. Defaults to the regular name."
                              },
                              "description": {
                                "type": "string",
                                "description": "Description of the annotation in the interface."
                              },
                              "valuePath": {
                                "type": "string",
                                "description": "Xpath: what element contains the value of this annotation"
                              },
                              "captureValuePaths": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                },
                                "description": "Xpath: Store some xpath results before evaluating valuePath, the stored results can now be used in valuePath. E.g. valuePath=\"/some/dynamic/path/$1/\", BlackLab will replace $1 with the result of the first captureValuePaths entry."
                              },
                              "sensitivity": {
                                "type": "string",
                                "enum": [
                                  "sensitive_insensitive",
                                  "sensitive",
                                  "insensitive",
                                  "s",
                                  "i",
                                  "si",
                                  "all"
                                ],
                                "description": "What alternatives are indexed determines how specifically you can specify the desired sensitivity when searching. Each alternative increases index size. Defaults to 'insensitive'"
                              },
                              "subannotations": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "additionalProperties": false,
                                  "properties": {
                                    "forEachPath": {
                                      "type": "string"
                                    },
                                    "namePath": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "forEachPath",
                                    "namePath"
                                  ]
                                }
                              },
                              "forwardIndex": {
                                "type": "boolean",
                                "description": "Whether to store the contents of this field in the forward index. This reduces the size of the index, but disables some features (grouping, sorting, displaying) for this annotation. Defaults to true."
                              },
                              "multipleValues": {
                                "type": "boolean",
                                "description": "Defaults to false."
                              },
                              "allowDuplicateValues": {
                                "type": "boolean",
                                "description": "Filter out duplicate values at the same token during indexing? Not doing this can result in \"double hits\" where the same token is matched twice in a query. Defaults to false."
                              },
                              "captureXml": {
                                "type": "boolean",
                                "description": "Store the xml instead of the text when 'valuePath' results in an xml element."
                              },
                              "isInternal": {
                                "type": "boolean",
                                "description": "Hides the field in various parts of the corpus-frontend. Not used by blacklab. Defaults to false."
                              },
                              "process": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "replace"
                                        },
                                        "find": {
                                          "type": "string",
                                          "description": "Regex to find. All matches are processed."
                                        },
                                        "replace": {
                                          "type": "string",
                                          "description": "String to replace with, capture group references ($1) are supported"
                                        },
                                        "keep": {
                                          "type": "string",
                                          "const": "all",
                                          "description": "keep both before and after. For this, 'multipleValues' must be true."
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "find",
                                        "replace"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Regex replace part of the value",
                                      "description": "Replace a part of the value with another value, optionally also keeping the original."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "default"
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Default value to use if the value is empty."
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "value"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Default value",
                                      "description": "Set a default value if there is none. The default value can be hardcoded, or retrieved from another metadata field."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "default"
                                        },
                                        "field": {
                                          "type": "string",
                                          "description": "Metadata Field to take the default value from. Make sure this field is further up in the configuration file, so it's already been indexed."
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "field"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Default value from another field",
                                      "description": "Set a default value if there is none. The default value can be retrieved from another metadata field."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "append"
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "String to append to the value."
                                        },
                                        "separator": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "value"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Append value",
                                      "description": "Append a string to all values."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "append"
                                        },
                                        "field": {
                                          "type": "string",
                                          "description": "Metadata Field to take the value to append from. Make sure this field is further up in the configuration file, so it's already been indexed."
                                        },
                                        "separator": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "field"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Append value from another field",
                                      "description": "Append a value of another metadata field to all values."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "split"
                                        },
                                        "separator": {
                                          "type": "string",
                                          "description": "Regex to split on. Defaults to ';'"
                                        },
                                        "keep": {
                                          "anyOf": [
                                            {
                                              "type": "number"
                                            },
                                            {
                                              "type": "string",
                                              "const": "all"
                                            },
                                            {
                                              "type": "string",
                                              "const": "both"
                                            }
                                          ],
                                          "description": "Which value(s) to keep. A 1-based integer. Defaults to the first value. Special value 'all' will keep all split values. Special value 'both' will keep all split values as well as the input values(s). For 'all' and 'both' to work, the field should have 'multipleValues=true'."
                                        }
                                      },
                                      "required": [
                                        "action"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Split values",
                                      "description": "Split the values and keep one or more parts."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "strip"
                                        },
                                        "chars": {
                                          "type": "string",
                                          "description": "List of characters to strip from beginning and end.."
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "chars"
                                      ],
                                      "additionalProperties": false,
                                      "title": "strip characters",
                                      "description": "Strip specific characters from the start and end of values."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "parsePos"
                                        },
                                        "field": {
                                          "type": "string",
                                          "description": "Field to extract. If omitted or '_', extract the main feature. Eg for NOU(a=b,c=d), the NOU portion."
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "field"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Parse part of speech",
                                      "description": "parse common part of speech expressions of the form A(b=c,d=e)\nwhere A is the main part of speech (e.g. 'N' for noun), and b=c is a part of speech feature\nsuch as number=plural, etc.\nIf you don't specify field (or specify an underscore _ for field),\nthe main part of speech is extracted.\nIf you specify a feature name (e.g. \"number\"), that feature is extracted."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "chatFormatAgeToMonths"
                                        }
                                      },
                                      "required": [
                                        "action"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Convert CHAT format age to months",
                                      "description": "convert age as reported in CHAT format to number of months"
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "concatDate"
                                        },
                                        "yearField": {
                                          "type": "string",
                                          "description": "Name of the other field containing the year. Ensure this is defined before this one, or if won't have been indexed yet."
                                        },
                                        "monthField": {
                                          "type": "string",
                                          "description": "Name of the other field containing the month. Ensure this is defined before this one, or if won't have been indexed yet."
                                        },
                                        "dayField": {
                                          "type": "string",
                                          "description": "Name of the other field containing the day. Ensure this is defined before this one, or if won't have been indexed yet."
                                        },
                                        "autofill": {
                                          "type": "string",
                                          "enum": [
                                            "start",
                                            "end"
                                          ],
                                          "description": "If the month is missing, 'start' fills with 01 (januari), 'end' fills with 12 (december). If the day is missing, 'start' fills with 01, 'end' fills with the last day of the month (28-31 depending, takes into account leap years.)."
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "yearField",
                                        "monthField",
                                        "dayField"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Concatenate date fields",
                                      "description": "Concatenate multiple other metadata fields for year/month/day into a single value in the format yyyymmdd, so they can be sorted and grouped on, and searched using a range-query."
                                    }
                                  ]
                                },
                                "description": "Post-process values. Every process entry is evaluated in order with the output of the previous one as input."
                              }
                            },
                            "required": [
                              "name",
                              "valuePath"
                            ],
                            "additionalProperties": false
                          },
                          "description": "What new annotations to store in the referenced tokens. Relative to 'path'."
                        }
                      },
                      "required": [
                        "path",
                        "tokenRefPath",
                        "annotations"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "path": {
                          "type": "string",
                          "description": "Xpath: where to find the standoff."
                        },
                        "spanStartPath": {
                          "type": "string",
                          "description": "See https://inl.github.io/BlackLab/guide/how-to-configure-indexing.html#standoff-annotations"
                        },
                        "spanEndPath": {
                          "type": "string",
                          "description": "See https://inl.github.io/BlackLab/guide/how-to-configure-indexing.html#standoff-annotations"
                        },
                        "spanEndIsInclusive": {
                          "type": "boolean",
                          "description": "See https://inl.github.io/BlackLab/guide/how-to-configure-indexing.html#standoff-annotations"
                        },
                        "spanNamePath": {
                          "type": "string",
                          "description": "See https://inl.github.io/BlackLab/guide/how-to-configure-indexing.html#standoff-annotations"
                        },
                        "annotations": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string",
                                "description": "Name of the annotation"
                              },
                              "displayName": {
                                "type": "string",
                                "description": "Name of the annotation in the interface. Defaults to the regular name."
                              },
                              "description": {
                                "type": "string",
                                "description": "Description of the annotation in the interface."
                              },
                              "valuePath": {
                                "type": "string",
                                "description": "Xpath: what element contains the value of this annotation"
                              },
                              "captureValuePaths": {
                                "type": "array",
                                "items": {
                                  "type": "string"
                                },
                                "description": "Xpath: Store some xpath results before evaluating valuePath, the stored results can now be used in valuePath. E.g. valuePath=\"/some/dynamic/path/$1/\", BlackLab will replace $1 with the result of the first captureValuePaths entry."
                              },
                              "sensitivity": {
                                "type": "string",
                                "enum": [
                                  "sensitive_insensitive",
                                  "sensitive",
                                  "insensitive",
                                  "s",
                                  "i",
                                  "si",
                                  "all"
                                ],
                                "description": "What alternatives are indexed determines how specifically you can specify the desired sensitivity when searching. Each alternative increases index size. Defaults to 'insensitive'"
                              },
                              "subannotations": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "additionalProperties": false,
                                  "properties": {
                                    "forEachPath": {
                                      "type": "string"
                                    },
                                    "namePath": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "forEachPath",
                                    "namePath"
                                  ]
                                }
                              },
                              "forwardIndex": {
                                "type": "boolean",
                                "description": "Whether to store the contents of this field in the forward index. This reduces the size of the index, but disables some features (grouping, sorting, displaying) for this annotation. Defaults to true."
                              },
                              "multipleValues": {
                                "type": "boolean",
                                "description": "Defaults to false."
                              },
                              "allowDuplicateValues": {
                                "type": "boolean",
                                "description": "Filter out duplicate values at the same token during indexing? Not doing this can result in \"double hits\" where the same token is matched twice in a query. Defaults to false."
                              },
                              "captureXml": {
                                "type": "boolean",
                                "description": "Store the xml instead of the text when 'valuePath' results in an xml element."
                              },
                              "isInternal": {
                                "type": "boolean",
                                "description": "Hides the field in various parts of the corpus-frontend. Not used by blacklab. Defaults to false."
                              },
                              "process": {
                                "type": "array",
                                "items": {
                                  "anyOf": [
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "replace"
                                        },
                                        "find": {
                                          "type": "string",
                                          "description": "Regex to find. All matches are processed."
                                        },
                                        "replace": {
                                          "type": "string",
                                          "description": "String to replace with, capture group references ($1) are supported"
                                        },
                                        "keep": {
                                          "type": "string",
                                          "const": "all",
                                          "description": "keep both before and after. For this, 'multipleValues' must be true."
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "find",
                                        "replace"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Regex replace part of the value",
                                      "description": "Replace a part of the value with another value, optionally also keeping the original."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "default"
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "Default value to use if the value is empty."
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "value"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Default value",
                                      "description": "Set a default value if there is none. The default value can be hardcoded, or retrieved from another metadata field."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "default"
                                        },
                                        "field": {
                                          "type": "string",
                                          "description": "Metadata Field to take the default value from. Make sure this field is further up in the configuration file, so it's already been indexed."
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "field"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Default value from another field",
                                      "description": "Set a default value if there is none. The default value can be retrieved from another metadata field."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "append"
                                        },
                                        "value": {
                                          "type": "string",
                                          "description": "String to append to the value."
                                        },
                                        "separator": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "value"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Append value",
                                      "description": "Append a string to all values."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "append"
                                        },
                                        "field": {
                                          "type": "string",
                                          "description": "Metadata Field to take the value to append from. Make sure this field is further up in the configuration file, so it's already been indexed."
                                        },
                                        "separator": {
                                          "type": "string"
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "field"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Append value from another field",
                                      "description": "Append a value of another metadata field to all values."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "split"
                                        },
                                        "separator": {
                                          "type": "string",
                                          "description": "Regex to split on. Defaults to ';'"
                                        },
                                        "keep": {
                                          "anyOf": [
                                            {
                                              "type": "number"
                                            },
                                            {
                                              "type": "string",
                                              "const": "all"
                                            },
                                            {
                                              "type": "string",
                                              "const": "both"
                                            }
                                          ],
                                          "description": "Which value(s) to keep. A 1-based integer. Defaults to the first value. Special value 'all' will keep all split values. Special value 'both' will keep all split values as well as the input values(s). For 'all' and 'both' to work, the field should have 'multipleValues=true'."
                                        }
                                      },
                                      "required": [
                                        "action"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Split values",
                                      "description": "Split the values and keep one or more parts."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "strip"
                                        },
                                        "chars": {
                                          "type": "string",
                                          "description": "List of characters to strip from beginning and end.."
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "chars"
                                      ],
                                      "additionalProperties": false,
                                      "title": "strip characters",
                                      "description": "Strip specific characters from the start and end of values."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "parsePos"
                                        },
                                        "field": {
                                          "type": "string",
                                          "description": "Field to extract. If omitted or '_', extract the main feature. Eg for NOU(a=b,c=d), the NOU portion."
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "field"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Parse part of speech",
                                      "description": "parse common part of speech expressions of the form A(b=c,d=e)\nwhere A is the main part of speech (e.g. 'N' for noun), and b=c is a part of speech feature\nsuch as number=plural, etc.\nIf you don't specify field (or specify an underscore _ for field),\nthe main part of speech is extracted.\nIf you specify a feature name (e.g. \"number\"), that feature is extracted."
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "chatFormatAgeToMonths"
                                        }
                                      },
                                      "required": [
                                        "action"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Convert CHAT format age to months",
                                      "description": "convert age as reported in CHAT format to number of months"
                                    },
                                    {
                                      "type": "object",
                                      "properties": {
                                        "action": {
                                          "type": "string",
                                          "const": "concatDate"
                                        },
                                        "yearField": {
                                          "type": "string",
                                          "description": "Name of the other field containing the year. Ensure this is defined before this one, or if won't have been indexed yet."
                                        },
                                        "monthField": {
                                          "type": "string",
                                          "description": "Name of the other field containing the month. Ensure this is defined before this one, or if won't have been indexed yet."
                                        },
                                        "dayField": {
                                          "type": "string",
                                          "description": "Name of the other field containing the day. Ensure this is defined before this one, or if won't have been indexed yet."
                                        },
                                        "autofill": {
                                          "type": "string",
                                          "enum": [
                                            "start",
                                            "end"
                                          ],
                                          "description": "If the month is missing, 'start' fills with 01 (januari), 'end' fills with 12 (december). If the day is missing, 'start' fills with 01, 'end' fills with the last day of the month (28-31 depending, takes into account leap years.)."
                                        }
                                      },
                                      "required": [
                                        "action",
                                        "yearField",
                                        "monthField",
                                        "dayField"
                                      ],
                                      "additionalProperties": false,
                                      "title": "Concatenate date fields",
                                      "description": "Concatenate multiple other metadata fields for year/month/day into a single value in the format yyyymmdd, so they can be sorted and grouped on, and searched using a range-query."
                                    }
                                  ]
                                },
                                "description": "Post-process values. Every process entry is evaluated in order with the output of the previous one as input."
                              }
                            },
                            "required": [
                              "name",
                              "valuePath"
                            ],
                            "additionalProperties": false
                          }
                        }
                      },
                      "required": [
                        "path",
                        "spanStartPath",
                        "spanEndPath",
                        "spanEndIsInclusive",
                        "spanNamePath",
                        "annotations"
                      ],
                      "additionalProperties": false,
                      "description": "See https://inl.github.io/BlackLab/guide/how-to-configure-indexing.html#standoff-annotations"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "type": {
                          "type": "string",
                          "const": "relation"
                        },
                        "valuePath": {
                          "type": "string"
                        },
                        "sourcePath": {
                          "type": "string"
                        },
                        "targetPath": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "type",
                        "valuePath",
                        "sourcePath",
                        "targetPath"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "description": "Standoff annotations are annotations that are specified in a different part of the document. See https://inl.github.io/BlackLab/guide/how-to-configure-indexing.html#standoff-annotations"
              },
              "inlineTags": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "path": {
                      "type": "string",
                      "description": "Xpath: relative to parent AnnotatedField's containerPath"
                    },
                    "tokenIdPath": {
                      "type": "string",
                      "description": "Xpath: Store an id with this inline tag ('path'), so you can index standoff annotations referring to this id later."
                    },
                    "excludeAttributes": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "E.g. \"xml:id\": Don't index Unique ids unless you need them; they slow down indexing and searching and increase index size"
                    },
                    "includeAttributes": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "Acts as attribute whitelist: Only index these attributes."
                    },
                    "displayAs": {
                      "type": "string",
                      "description": "Css class to give these tags in the automatic xslt generation"
                    }
                  },
                  "required": [
                    "path"
                  ],
                  "additionalProperties": false
                },
                "description": "What tags occurring between the word tags do we wish to index? (relative to containerPath)"
              }
            },
            "required": [
              "wordPath",
              "annotations"
            ],
            "additionalProperties": false
          },
          "description": "What annotation sets are in the document?"
        },
        "metadata": {
          "type": "object",
          "properties": {
            "containerPath": {
              "type": "string",
              "description": "Xpath: What element (relative to documentPath) contains the metadata? (If omitted, entire document is used.)"
            },
            "defaultAnalyzer": {
              "type": "string",
              "description": "Analyzer to use for metadata fields. Unless overridden in the field through"
            },
            "fields": {
              "type": "array",
              "items": {
                "anyOf": [
                  {
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string",
                        "description": "Name of the metadata field in BlackLab"
                      },
                      "displayName": {
                        "type": "string",
                        "description": "Name that will be displayed in the interface"
                      },
                      "description": {
                        "type": "string",
                        "description": "Description that will be displayed in the interface"
                      },
                      "valuePath": {
                        "type": "string",
                        "description": "Xpath for the value of this metadata. Relative to metadata.containerPath"
                      },
                      "value": {
                        "type": "string",
                        "description": "Hardcoded value for this metadata field. Will replace 'valuePath' with the string value."
                      },
                      "multipleValues": {
                        "type": "boolean",
                        "description": "Can this metadata field have multiple values? Useful for things like Authors. Defaults to true."
                      },
                      "type": {
                        "type": "string",
                        "enum": [
                          "untokenized",
                          "tokenized",
                          "numeric"
                        ],
                        "description": "Should metadata be split into words/tokens, or it a number (changes sorting, leading zeroes matching, etc.). Defaults to 'tokenized'. The pidField (see specialFields) should be untokenized usually, or viewing documents in corpus-frontend might not work when the document id contains spaces."
                      },
                      "uiType": {
                        "type": "string",
                        "enum": [
                          "autocomplete",
                          "combobox",
                          "range",
                          "select",
                          "dropdown",
                          "checkbox",
                          "radio",
                          "date",
                          "text"
                        ],
                        "description": "Autocomplete/combobox: show a dropdown list with live search. The user can also type in a custom value. Range: show two inputs for a min and max value. Select/dropdown: show a dropdown list with predefined values. The user can't type in a custom value. Checkbox: show a checkbox for every value. Multiple values can be selected. Radio: show a radio button for every value. Only one value can be selected. Date: show a date picker. The format of values is expected to be yyyymmdd. For example '20210101'. Text: show a text input. Leaving this empty will default to 'dropdown' if all values are known and 'autocomplete' otherwise."
                      },
                      "process": {
                        "type": "array",
                        "items": {
                          "anyOf": [
                            {
                              "type": "object",
                              "properties": {
                                "action": {
                                  "type": "string",
                                  "const": "replace"
                                },
                                "find": {
                                  "type": "string",
                                  "description": "Regex to find. All matches are processed."
                                },
                                "replace": {
                                  "type": "string",
                                  "description": "String to replace with, capture group references ($1) are supported"
                                },
                                "keep": {
                                  "type": "string",
                                  "const": "all",
                                  "description": "keep both before and after. For this, 'multipleValues' must be true."
                                }
                              },
                              "required": [
                                "action",
                                "find",
                                "replace"
                              ],
                              "additionalProperties": false,
                              "title": "Regex replace part of the value",
                              "description": "Replace a part of the value with another value, optionally also keeping the original."
                            },
                            {
                              "type": "object",
                              "properties": {
                                "action": {
                                  "type": "string",
                                  "const": "default"
                                },
                                "value": {
                                  "type": "string",
                                  "description": "Default value to use if the value is empty."
                                }
                              },
                              "required": [
                                "action",
                                "value"
                              ],
                              "additionalProperties": false,
                              "title": "Default value",
                              "description": "Set a default value if there is none. The default value can be hardcoded, or retrieved from another metadata field."
                            },
                            {
                              "type": "object",
                              "properties": {
                                "action": {
                                  "type": "string",
                                  "const": "default"
                                },
                                "field": {
                                  "type": "string",
                                  "description": "Metadata Field to take the default value from. Make sure this field is further up in the configuration file, so it's already been indexed."
                                }
                              },
                              "required": [
                                "action",
                                "field"
                              ],
                              "additionalProperties": false,
                              "title": "Default value from another field",
                              "description": "Set a default value if there is none. The default value can be retrieved from another metadata field."
                            },
                            {
                              "type": "object",
                              "properties": {
                                "action": {
                                  "type": "string",
                                  "const": "append"
                                },
                                "value": {
                                  "type": "string",
                                  "description": "String to append to the value."
                                },
                                "separator": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "action",
                                "value"
                              ],
                              "additionalProperties": false,
                              "title": "Append value",
                              "description": "Append a string to all values."
                            },
                            {
                              "type": "object",
                              "properties": {
                                "action": {
                                  "type": "string",
                                  "const": "append"
                                },
                                "field": {
                                  "type": "string",
                                  "description": "Metadata Field to take the value to append from. Make sure this field is further up in the configuration file, so it's already been indexed."
                                },
                                "separator": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "action",
                                "field"
                              ],
                              "additionalProperties": false,
                              "title": "Append value from another field",
                              "description": "Append a value of another metadata field to all values."
                            },
                            {
                              "type": "object",
                              "properties": {
                                "action": {
                                  "type": "string",
                                  "const": "split"
                                },
                                "separator": {
                                  "type": "string",
                                  "description": "Regex to split on. Defaults to ';'"
                                },
                                "keep": {
                                  "anyOf": [
                                    {
                                      "type": "number"
                                    },
                                    {
                                      "type": "string",
                                      "const": "all"
                                    },
                                    {
                                      "type": "string",
                                      "const": "both"
                                    }
                                  ],
                                  "description": "Which value(s) to keep. A 1-based integer. Defaults to the first value. Special value 'all' will keep all split values. Special value 'both' will keep all split values as well as the input values(s). For 'all' and 'both' to work, the field should have 'multipleValues=true'."
                                }
                              },
                              "required": [
                                "action"
                              ],
                              "additionalProperties": false,
                              "title": "Split values",
                              "description": "Split the values and keep one or more parts."
                            },
                            {
                              "type": "object",
                              "properties": {
                                "action": {
                                  "type": "string",
                                  "const": "strip"
                                },
                                "chars": {
                                  "type": "string",
                                  "description": "List of characters to strip from beginning and end.."
                                }
                              },
                              "required": [
                                "action",
                                "chars"
                              ],
                              "additionalProperties": false,
                              "title": "strip characters",
                              "description": "Strip specific characters from the start and end of values."
                            },
                            {
                              "type": "object",
                              "properties": {
                                "action": {
                                  "type": "string",
                                  "const": "parsePos"
                                },
                                "field": {
                                  "type": "string",
                                  "description": "Field to extract. If omitted or '_', extract the main feature. Eg for NOU(a=b,c=d), the NOU portion."
                                }
                              },
                              "required": [
                                "action",
                                "field"
                              ],
                              "additionalProperties": false,
                              "title": "Parse part of speech",
                              "description": "parse common part of speech expressions of the form A(b=c,d=e)\nwhere A is the main part of speech (e.g. 'N' for noun), and b=c is a part of speech feature\nsuch as number=plural, etc.\nIf you don't specify field (or specify an underscore _ for field),\nthe main part of speech is extracted.\nIf you specify a feature name (e.g. \"number\"), that feature is extracted."
                            },
                            {
                              "type": "object",
                              "properties": {
                                "action": {
                                  "type": "string",
                                  "const": "chatFormatAgeToMonths"
                                }
                              },
                              "required": [
                                "action"
                              ],
                              "additionalProperties": false,
                              "title": "Convert CHAT format age to months",
                              "description": "convert age as reported in CHAT format to number of months"
                            },
                            {
                              "type": "object",
                              "properties": {
                                "action": {
                                  "type": "string",
                                  "const": "concatDate"
                                },
                                "yearField": {
                                  "type": "string",
                                  "description": "Name of the other field containing the year. Ensure this is defined before this one, or if won't have been indexed yet."
                                },
                                "monthField": {
                                  "type": "string",
                                  "description": "Name of the other field containing the month. Ensure this is defined before this one, or if won't have been indexed yet."
                                },
                                "dayField": {
                                  "type": "string",
                                  "description": "Name of the other field containing the day. Ensure this is defined before this one, or if won't have been indexed yet."
                                },
                                "autofill": {
                                  "type": "string",
                                  "enum": [
                                    "start",
                                    "end"
                                  ],
                                  "description": "If the month is missing, 'start' fills with 01 (januari), 'end' fills with 12 (december). If the day is missing, 'start' fills with 01, 'end' fills with the last day of the month (28-31 depending, takes into account leap years.)."
                                }
                              },
                              "required": [
                                "action",
                                "yearField",
                                "monthField",
                                "dayField"
                              ],
                              "additionalProperties": false,
                              "title": "Concatenate date fields",
                              "description": "Concatenate multiple other metadata fields for year/month/day into a single value in the format yyyymmdd, so they can be sorted and grouped on, and searched using a range-query."
                            }
                          ]
                        },
                        "description": "Post-process values. Every process entry is evaluated in order with the output of the previous one as input."
                      },
                      "mapValues": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        },
                        "description": "Replace values with other values. Takes effect AFTER processing."
                      },
                      "unknownCondition": {
                        "type": "string",
                        "enum": [
                          "never",
                          "missing",
                          "empty",
                          "missing_or_empty"
                        ],
                        "description": "When to replace value with default (or ignore it altogether). Defaults to 'never'"
                      },
                      "unknownValue": {
                        "type": "string",
                        "description": "Default value when the field doesn't have one according to 'unknownCondition'"
                      },
                      "analyzer": {
                        "type": "string"
                      },
                      "sortValues": {
                        "type": "boolean",
                        "description": "Sort values when there are multiple? Useful when sorting or grouping results, as [a,b] and [b,a] could otherwise be different groups."
                      }
                    },
                    "required": [
                      "name"
                    ],
                    "additionalProperties": false
                  },
                  {
                    "type": "object",
                    "properties": {
                      "forEachPath": {
                        "type": "string",
                        "description": "Xpath that can match multiple elements. The namePath and valuePath will be evaluated at every position."
                      },
                      "namePath": {
                        "type": "string",
                        "description": "Xpath for the name of the current metadata field."
                      },
                      "valuePath": {
                        "type": "string",
                        "description": "Xpath for the value(s) of the current metadata field."
                      }
                    },
                    "required": [
                      "forEachPath",
                      "namePath",
                      "valuePath"
                    ],
                    "additionalProperties": false,
                    "description": "A for-each version of the metadata field, that will loop over the for-each path, and create a field for every match. Further settings should be in the named metadata entry."
                  }
                ]
              },
              "description": "The metadata fields. These are indexed in order of declaration. Their xpaths are relative to 'containerPath'"
            }
          },
          "required": [
            "fields"
          ],
          "additionalProperties": false,
          "description": "Embedded metadata in document"
        },
        "metadataDefaultAnalyzer": {
          "type": "string",
          "description": "Analyzer to use for metadata fields. Unless overridden in the field"
        },
        "metadataDefaultUnknownCondition": {
          "type": "string",
          "enum": [
            "never",
            "missing",
            "empty",
            "missing_or_empty"
          ],
          "description": "When to substitute default value for metadata. Defaults to 'never'"
        },
        "metadataDefaultUnknownValue": {
          "type": "string",
          "description": "Value to substitute when a metadata field doesn't have a value. Defaults to 'unknown'"
        },
        "indexFieldAs": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Name replacements for metadata fields. Only has effect for fields created through forEachPath"
        },
        "linkedDocuments": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "store": {
                "type": "boolean",
                "description": "Should we store the linked document in our index? in this case, a field metadataCid will be created that contains a content store id, allowing you to fetch the original content of the document later). Defaults to true."
              },
              "linkValues": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "valuePath": {
                      "type": "string"
                    },
                    "process": {
                      "type": "array",
                      "items": {
                        "anyOf": [
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "replace"
                              },
                              "find": {
                                "type": "string",
                                "description": "Regex to find. All matches are processed."
                              },
                              "replace": {
                                "type": "string",
                                "description": "String to replace with, capture group references ($1) are supported"
                              },
                              "keep": {
                                "type": "string",
                                "const": "all",
                                "description": "keep both before and after. For this, 'multipleValues' must be true."
                              }
                            },
                            "required": [
                              "action",
                              "find",
                              "replace"
                            ],
                            "additionalProperties": false,
                            "title": "Regex replace part of the value",
                            "description": "Replace a part of the value with another value, optionally also keeping the original."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "default"
                              },
                              "value": {
                                "type": "string",
                                "description": "Default value to use if the value is empty."
                              }
                            },
                            "required": [
                              "action",
                              "value"
                            ],
                            "additionalProperties": false,
                            "title": "Default value",
                            "description": "Set a default value if there is none. The default value can be hardcoded, or retrieved from another metadata field."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "default"
                              },
                              "field": {
                                "type": "string",
                                "description": "Metadata Field to take the default value from. Make sure this field is further up in the configuration file, so it's already been indexed."
                              }
                            },
                            "required": [
                              "action",
                              "field"
                            ],
                            "additionalProperties": false,
                            "title": "Default value from another field",
                            "description": "Set a default value if there is none. The default value can be retrieved from another metadata field."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "append"
                              },
                              "value": {
                                "type": "string",
                                "description": "String to append to the value."
                              },
                              "separator": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "action",
                              "value"
                            ],
                            "additionalProperties": false,
                            "title": "Append value",
                            "description": "Append a string to all values."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "append"
                              },
                              "field": {
                                "type": "string",
                                "description": "Metadata Field to take the value to append from. Make sure this field is further up in the configuration file, so it's already been indexed."
                              },
                              "separator": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "action",
                              "field"
                            ],
                            "additionalProperties": false,
                            "title": "Append value from another field",
                            "description": "Append a value of another metadata field to all values."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "split"
                              },
                              "separator": {
                                "type": "string",
                                "description": "Regex to split on. Defaults to ';'"
                              },
                              "keep": {
                                "anyOf": [
                                  {
                                    "type": "number"
                                  },
                                  {
                                    "type": "string",
                                    "const": "all"
                                  },
                                  {
                                    "type": "string",
                                    "const": "both"
                                  }
                                ],
                                "description": "Which value(s) to keep. A 1-based integer. Defaults to the first value. Special value 'all' will keep all split values. Special value 'both' will keep all split values as well as the input values(s). For 'all' and 'both' to work, the field should have 'multipleValues=true'."
                              }
                            },
                            "required": [
                              "action"
                            ],
                            "additionalProperties": false,
                            "title": "Split values",
                            "description": "Split the values and keep one or more parts."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "strip"
                              },
                              "chars": {
                                "type": "string",
                                "description": "List of characters to strip from beginning and end.."
                              }
                            },
                            "required": [
                              "action",
                              "chars"
                            ],
                            "additionalProperties": false,
                            "title": "strip characters",
                            "description": "Strip specific characters from the start and end of values."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "parsePos"
                              },
                              "field": {
                                "type": "string",
                                "description": "Field to extract. If omitted or '_', extract the main feature. Eg for NOU(a=b,c=d), the NOU portion."
                              }
                            },
                            "required": [
                              "action",
                              "field"
                            ],
                            "additionalProperties": false,
                            "title": "Parse part of speech",
                            "description": "parse common part of speech expressions of the form A(b=c,d=e)\nwhere A is the main part of speech (e.g. 'N' for noun), and b=c is a part of speech feature\nsuch as number=plural, etc.\nIf you don't specify field (or specify an underscore _ for field),\nthe main part of speech is extracted.\nIf you specify a feature name (e.g. \"number\"), that feature is extracted."
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "chatFormatAgeToMonths"
                              }
                            },
                            "required": [
                              "action"
                            ],
                            "additionalProperties": false,
                            "title": "Convert CHAT format age to months",
                            "description": "convert age as reported in CHAT format to number of months"
                          },
                          {
                            "type": "object",
                            "properties": {
                              "action": {
                                "type": "string",
                                "const": "concatDate"
                              },
                              "yearField": {
                                "type": "string",
                                "description": "Name of the other field containing the year. Ensure this is defined before this one, or if won't have been indexed yet."
                              },
                              "monthField": {
                                "type": "string",
                                "description": "Name of the other field containing the month. Ensure this is defined before this one, or if won't have been indexed yet."
                              },
                              "dayField": {
                                "type": "string",
                                "description": "Name of the other field containing the day. Ensure this is defined before this one, or if won't have been indexed yet."
                              },
                              "autofill": {
                                "type": "string",
                                "enum": [
                                  "start",
                                  "end"
                                ],
                                "description": "If the month is missing, 'start' fills with 01 (januari), 'end' fills with 12 (december). If the day is missing, 'start' fills with 01, 'end' fills with the last day of the month (28-31 depending, takes into account leap years.)."
                              }
                            },
                            "required": [
                              "action",
                              "yearField",
                              "monthField",
                              "dayField"
                            ],
                            "additionalProperties": false,
                            "title": "Concatenate date fields",
                            "description": "Concatenate multiple other metadata fields for year/month/day into a single value in the format yyyymmdd, so they can be sorted and grouped on, and searched using a range-query."
                          }
                        ]
                      }
                    }
                  },
                  "required": [
                    "valuePath",
                    "process"
                  ],
                  "additionalProperties": false
                },
                "description": "Xpath: list of xpaths to perform for value substitutions in the inputFile property."
              },
              "inputFile": {
                "type": "string",
                "description": "How to fetch the linked input file containing the linked document. File or http(s) reference. May contain $x (x = 1-9), which will be replaced with linkValue E.G. \"https://example.com/$1.xml\" where $1 is the result of the first linkValue."
              },
              "pathInsideArchive": {
                "type": "string",
                "description": "If the linked input file is an archive, the path inside it. Is interpolated just like 'inputFile'."
              },
              "ifLinkPathMissing": {
                "type": "string",
                "enum": [
                  "ignore",
                  "warn",
                  "fail"
                ],
                "description": "Defaults to 'fail'"
              },
              "inputFormat": {
                "type": "string",
                "description": "Id of the format to use for indexing the linked file."
              },
              "documentPath": {
                "type": "string",
                "description": "(Optional) XPath to the (single) linked document to process. If omitted, the entire file is processed, and must contain only one document. May contain $x (x = 1-9), which will be replaced with (processed) linkValue. E.g. /root/metadata[@docId = $2]"
              }
            },
            "required": [
              "store",
              "inputFile",
              "inputFormat"
            ],
            "additionalProperties": false
          },
          "description": "See https://inl.github.io/BlackLab/guide/how-to-configure-indexing.html#linking-to-external-document-metadata"
        },
        "corpusConfig": {
          "type": "object",
          "properties": {
            "displayName": {
              "type": "string",
              "description": "Corpus display name in the user interface"
            },
            "description": {
              "type": "string",
              "description": "Corpus description in the user interface"
            },
            "contentViewable": {
              "type": "boolean",
              "description": "Is the user allowed to view whole documents? [false]. Can also be specified per-document by creating a metadata field with this name containing a boolean."
            },
            "textDirection": {
              "type": "string",
              "enum": [
                "ltr",
                "rtl"
              ],
              "description": "Defaults to 'ltr'"
            },
            "specialFields": {
              "type": "object",
              "properties": {
                "pidField": {
                  "type": "string",
                  "description": "Defaults to 'id'"
                },
                "titleField": {
                  "type": "string",
                  "description": "Defaults to 'title'"
                },
                "authorField": {
                  "type": "string",
                  "description": "Defaults to 'author'"
                },
                "dateField": {
                  "type": "string",
                  "description": "Defaults to 'date'"
                }
              },
              "additionalProperties": false
            },
            "metadataFieldGroups": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Group name"
                  },
                  "fields": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Metadata fields in this group"
                  },
                  "addRemainingFields": {
                    "type": "boolean",
                    "description": "Add all fields not in any other group. Only one group should have this. Defaults to false."
                  }
                },
                "required": [
                  "name",
                  "fields"
                ],
                "additionalProperties": false,
                "description": "How to group together metadata fields in the corpus-frontend search interface."
              },
              "description": "How to group together metadata fields in the corpus-frontend search interface."
            },
            "annotationGroups": {
              "type": "object",
              "additionalProperties": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "annotations": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "addRemainingAnnotations": {
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "name",
                    "annotations",
                    "addRemainingAnnotations"
                  ],
                  "additionalProperties": false
                }
              }
            }
          },
          "additionalProperties": false,
          "description": "See https://inl.github.io/BlackLab/guide/how-to-configure-indexing.html#corpus-metadata"
        },
        "store": {
          "type": "boolean",
          "description": "Whether to store the document contents in the content store. Disabling this removes the ability to view document's contents. Defaults to true."
        }
      },
      "required": [
        "documentPath",
        "annotatedFields",
        "metadata"
      ],
      "additionalProperties": false
    }
  }
}